id: "http://schemas.taskcluster.net/generic-worker/v1/payload.json#"
$schema: "http://json-schema.org/draft-04/schema#"
title: "Payload"
description: "This schema defines the structure of the `payload` property referred to in a Task Cluster Task definition."
type: "object"
required: 
  - "command"
  - "maxRunTime"
properties: 
  command: 
    title: "Commands to run"
    type: "array"
    minItems: 1
    items: 
      type: "array"
      minItems: 1
      items: 
        type: "string"
    description: "One array per command (each command is an array of arguments). Several arrays for several commands."
  env: 
    title: "Environment variable mappings."
    description: "Example: ```{ \"PATH\": \"C:\\\\Windows\\\\system32;C:\\\\Windows\", \"GOOS\": \"darwin\" }```"
    type: "object"
  maxRunTime: 
    type: "integer"
    title: "Maximum run time in seconds"
    description: "Maximum time the task container can run in seconds"
    multipleOf: 1
    minimum: 1
    maximum: 86400
  artifacts: 
    type: "array"
    title: "Artifacts to be published"
    description: "Artifacts to be published. For example: `{ \"type\": \"file\", \"path\": \"builds\\\\firefox.exe\", \"expires\": \"2015-08-19T17:30:00.000Z\" }`"
    items: 
      type: "object"
      properties: 
        type: 
          title: "Artifact upload type."
          type: "string"
          enum: 
            - "file"
            - "directory"
          description: "Artifacts can be either an individual `file` or a `directory` containing potentially multiple files with recursively included subdirectories"
        path: 
          title: "Artifact location"
          type: "string"
          description: "Filesystem path of artifact"
        expires: 
          title: "Expiry date and time"
          type: "string"
          format: "date-time"
          description: "Date when artifact should expire must be in the future"
      required: 
        - "type"
        - "path"
        - "expires"
